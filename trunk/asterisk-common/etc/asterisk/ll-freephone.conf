;#include lifeline.conf

[ll-freephone]
exten => s,1,Set(callstart=${EPOCH})
exten => s,n,Set(db_host=10.2.170.20)
exten => s,n,Set(db_port=3308)
exten => s,n,Set(msgdir=/usr/local/asterisk/lifeline-msgs)
exten => s,n,Set(db_name=lifeline);
exten => s,n,Set(db_user=ll);
exten => s,n,Set(db_secret=85$82$str)
exten => s,n,Background(ll-freephonegrt)
exten => s,n,WaitExten(12)
exten => i,1,Hangup
exten => t,1,Hangup

exten => _XXXX,1,Set(box=${EXTEN})
exten => _XXXX,n,Progress
exten => _XXXX,n,AGI(ll-callstart.pl,${CALLERID(all)})
exten => _XXXX,n,Set(count=${start_count})
exten => _XXXX,n,Set(count=$[${count} + 1])
exten => _XXXX,n,Set(newmsg=)
exten => _XXXX,n,Goto(greeting,s,1)
exten => _XXXX,n,Hangup

exten => _NXXNXXXXXX,1,Wait(4)
exten => _NXXNXXXXXX,n,Dial(SIP/${EXTEN}@voicemeup-trunk);
exten => _NXXNXXXXXX,n,Hangup
